<!DOCTYPE html><html lang="zh-CN"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=2"><meta name="theme-color" content="#222"><meta name="generator" content="Hexo 7.2.0"><link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16.png"><link rel="mask-icon" href="/images/logo.svg" color="#222"><link rel="stylesheet" href="/css/main.css"><link rel="stylesheet" href="/lib/font-awesome/css/all.min.css"><script id="hexo-configurations">var NexT=window.NexT||{},CONFIG={hostname:"www.liuvv.com",root:"/",scheme:"Pisces",version:"7.8.0",exturl:!1,sidebar:{position:"left",display:"post",padding:18,offset:12,onmobile:!1,dimmer:!1},copycode:{enable:!1,show_result:!1,style:null},back2top:{enable:!0,sidebar:!1,scrollpercent:!1},bookmark:{enable:!1,color:"#222",save:"auto"},fancybox:!1,mediumzoom:!1,lazyload:!1,pangu:!1,comments:{style:"tabs",active:null,storage:!0,lazyload:!1,nav:null},algolia:{hits:{per_page:10},labels:{input_placeholder:"Search for Posts",hits_empty:"We didn't find any results for the search: ${query}",hits_stats:"${hits} results found in ${time} ms"}},localsearch:{enable:!0,trigger:"auto",top_n_per_article:1,unescape:!1,preload:!1},motion:{enable:!0,async:!1,transition:{post_block:"fadeIn",post_header:"slideDownIn",post_body:"slideDownIn",coll_header:"slideLeftIn",sidebar:"slideUpIn"}},path:"search.json"}</script><meta name="description" content="1. 以太坊帐户一个以太坊帐户是一个具有以太币 (ETH) 余额的实体，可以在以太坊上发送交易。帐户和钱包不同，帐户是用户拥有的以太坊帐户的密钥对。 钱包是界面或应用程序，可以让你与以太坊帐户交互。"><meta property="og:type" content="article"><meta property="og:title" content="以太坊基础"><meta property="og:url" content="https://www.liuvv.com/p/319117f7.html"><meta property="og:site_name" content="Levon&#39;s Blog"><meta property="og:description" content="1. 以太坊帐户一个以太坊帐户是一个具有以太币 (ETH) 余额的实体，可以在以太坊上发送交易。帐户和钱包不同，帐户是用户拥有的以太坊帐户的密钥对。 钱包是界面或应用程序，可以让你与以太坊帐户交互。"><meta property="og:locale" content="zh_CN"><meta property="og:image" content="https://www.liuvv.com/p/319117f7/image-20240518215208920.png"><meta property="og:image" content="https://www.liuvv.com/p/319117f7/gas.png"><meta property="og:image" content="https://www.liuvv.com/p/319117f7/gas-tx.png"><meta property="og:image" content="https://www.liuvv.com/p/319117f7/tx-block.png"><meta property="og:image" content="https://www.liuvv.com/p/319117f7/evm.png"><meta property="article:published_time" content="2020-05-18T00:00:01.000Z"><meta property="article:modified_time" content="2024-05-29T12:59:20.062Z"><meta property="article:author" content="levon"><meta name="twitter:card" content="summary"><meta name="twitter:image" content="https://www.liuvv.com/p/319117f7/image-20240518215208920.png"><link rel="canonical" href="https://www.liuvv.com/p/319117f7.html"><script id="page-configurations">CONFIG.page={sidebar:"",isHome:!1,isPost:!0,lang:"zh-CN"}</script><title>以太坊基础 | Levon's Blog</title><script>var _hmt=_hmt||[];!function(){var e=document.createElement("script");e.src="https://hm.baidu.com/hm.js?521e5dbc31dd12bb9431823008da3dfc";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}()</script><noscript><style>.sidebar-inner,.use-motion .brand,.use-motion .collection-header,.use-motion .comments,.use-motion .menu-item,.use-motion .pagination,.use-motion .post-block,.use-motion .post-body,.use-motion .post-header{opacity:initial}.use-motion .site-subtitle,.use-motion .site-title{opacity:initial;top:initial}.use-motion .logo-line-before i{left:initial}.use-motion .logo-line-after i{right:initial}</style></noscript></head><body itemscope itemtype="http://schema.org/WebPage"><div class="container use-motion"><div class="headband"></div><header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="header-inner"><div class="site-brand-container"><div class="site-nav-toggle"><div class="toggle" aria-label="切换导航栏"><span class="toggle-line toggle-line-first"></span> <span class="toggle-line toggle-line-middle"></span> <span class="toggle-line toggle-line-last"></span></div></div><div class="site-meta"><a href="/" class="brand" rel="start"><span class="logo-line-before"><i></i></span><h1 class="site-title">Levon's Blog</h1><span class="logo-line-after"><i></i></span></a><p class="site-subtitle" itemprop="description">微信: L6241425</p></div><div class="site-nav-right"><div class="toggle popup-trigger"><i class="fa fa-search fa-fw fa-lg"></i></div></div></div><nav class="site-nav"><ul id="menu" class="main-menu menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="home fa-fw"></i>首页</a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="archive fa-fw"></i>日志</a></li><li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="th fa-fw"></i>分类</a></li><li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="tags fa-fw"></i>标签</a></li><li class="menu-item menu-item-about"><a href="/about/" rel="section"><i class="user fa-fw"></i>关于</a></li><li class="menu-item menu-item-search"><a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜索</a></li></ul></nav><div class="search-pop-overlay"><div class="popup search-popup"><div class="search-header"><span class="search-icon"><i class="fa fa-search"></i></span><div class="search-input-container"><input autocomplete="off" autocapitalize="off" placeholder="搜索..." spellcheck="false" type="search" class="search-input"></div><span class="popup-btn-close"><i class="fa fa-times-circle"></i></span></div><div id="search-result"><div id="no-result"><i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i></div></div></div></div></div></header><div class="back-to-top"><i class="fa fa-arrow-up"></i> <span>0%</span></div><a href="https://github.com/unix2dos" class="github-corner" title="Follow me on GitHub" aria-label="Follow me on GitHub" rel="noopener" target="_blank"><svg width="80" height="80" viewBox="0 0 250 250" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin:130px 106px" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg></a><main class="main"><div class="main-inner"><div class="content-wrap"><div class="content post posts-expand"><article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN"><link itemprop="mainEntityOfPage" href="https://www.liuvv.com/p/319117f7.html"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="image" content="/images/avatar.jpg"><meta itemprop="name" content="levon"><meta itemprop="description" content="Keep it simple, stupid."></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="Levon's Blog"></span><header class="post-header"><h1 class="post-title" itemprop="name headline">以太坊基础</h1><div class="post-meta"><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-calendar"></i> </span><span class="post-meta-item-text">发表于</span> <time title="创建时间：2020-05-18 00:00:01" itemprop="dateCreated datePublished" datetime="2020-05-18T00:00:01+00:00">2020-05-18</time> </span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-calendar-check"></i> </span><span class="post-meta-item-text">更新于</span> <time title="修改时间：2024-05-29 12:59:20" itemprop="dateModified" datetime="2024-05-29T12:59:20+00:00">2024-05-29</time> </span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-folder"></i> </span><span class="post-meta-item-text">分类于</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/3-%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%B3%BB%E7%BB%9F/" itemprop="url" rel="index"><span itemprop="name">3-计算机系统</span></a> </span>， <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/3-%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%B3%BB%E7%BB%9F/web3/" itemprop="url" rel="index"><span itemprop="name">web3</span></a> </span></span><span id="/p/319117f7.html" class="post-meta-item leancloud_visitors" data-flag-title="以太坊基础" title="阅读次数"><span class="post-meta-item-icon"><i class="fa fa-eye"></i> </span><span class="post-meta-item-text">阅读次数：</span> <span class="leancloud-visitors-count"></span> </span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-comment"></i> </span><span class="post-meta-item-text">Valine：</span> <a title="valine" href="/p/319117f7.html#valine-comments" itemprop="discussionUrl"><span class="post-comments-count valine-comment-count" data-xid="/p/319117f7.html" itemprop="commentCount"></span></a></span><br><span class="post-meta-item" title="本文字数"><span class="post-meta-item-icon"><i class="far fa-file-word"></i> </span><span class="post-meta-item-text">本文字数：</span> <span>9.6k</span> </span><span class="post-meta-item" title="阅读时长"><span class="post-meta-item-icon"><i class="far fa-clock"></i> </span><span class="post-meta-item-text">阅读时长 &asymp;</span> <span>9 分钟</span></span></div></header><div class="post-body" itemprop="articleBody"><h1 id="1-以太坊帐户"><a href="#1-以太坊帐户" class="headerlink" title="1. 以太坊帐户"></a>1. 以太坊帐户</h1><p>一个以太坊帐户是一个具有以太币 (ETH) 余额的实体，可以在以太坊上发送交易。帐户和钱包不同，帐户是用户拥有的以太坊帐户的密钥对。 钱包是界面或应用程序，可以让你与以太坊帐户交互。</p><span id="more"></span><p>以太坊有两种帐户类型：</p><ul><li>外部所有的帐户 (EOA) – 由任何拥有私钥的人控制</li><li>合约帐户 – 部署到网络上的智能合约，由代码控制。</li></ul><h3 id="1-1-外部持有"><a href="#1-1-外部持有" class="headerlink" title="1.1 外部持有"></a>1.1 <strong>外部持有</strong></h3><ul><li>创建帐户是免费的</li><li>可以发起交易</li><li>外部所有的帐户之间只能进行以太币和代币交易</li><li>由一对加密密钥组成：控制帐户活动的公钥和私钥</li></ul><h3 id="1-2-合约账户"><a href="#1-2-合约账户" class="headerlink" title="1.2 合约账户"></a>1.2 合约账户</h3><ul><li>创建合约存在成本，因为需要使用网络存储空间</li><li><strong>只能在收到交易时发送交易</strong></li><li>从外部帐户向合约帐户发起的交易能触发可执行多种操作的代码，例如转移代币甚至创建新合约</li><li>合约帐户没有私钥。 相反，它们由智能合约代码逻辑控制</li></ul><h3 id="1-3-账户构成"><a href="#1-3-账户构成" class="headerlink" title="1.3 账户构成"></a>1.3 账户构成</h3><p>以太坊帐户有四个字段：</p><ul><li><code>nonce</code> - 一个计数器，用来显示<strong>外部帐户发送的交易数量</strong>或<strong>合约帐户创建的合约数量</strong>。 每个帐户只能执行具有一个给定随机数的一笔交易，以防范重放攻击，重放攻击指多次广播和重复执行已签署的交易。</li><li><code>balance</code> – 这个地址拥有的 Wei 数量。 Wei 是以太币的计数单位，每个 ETH 有 1e+18 个 Wei。</li><li><code>storageRoot</code> – 有时被称为存储哈希。 Merkle Patricia trie 根节点的 256 位哈希已编码了帐户的存储内容（256 位整数值映射），并编码为 Trie，作为来自 256 的 Keccak 256 位哈希的映射位整数键，用于 RLP 编码的 256 位整数值。 此 Trie 对此帐户存储内容的哈希进行编码，默认情况下为空。</li><li><code>codeHash</code> - 该哈希表示以太坊虚拟机 (EVM) 上的帐户代码。合约帐户具有编程的代码片段，可以执行不同的操作。如果帐户收到消息调用，则执行此 EVM 代码。与其他帐户字段不同，不能更改。所有代码片段都被保存在状态数据库的相应哈希下，供后续检索。此哈希值称为 codeHash。对于外部所有的帐户，codeHash 字段是空字符串的哈希。</li></ul><img src="/p/319117f7/image-20240518215208920.png" alt="image-20240518215208920" style="zoom:50%"><h3 id="1-4-私钥"><a href="#1-4-私钥" class="headerlink" title="1.4  私钥"></a>1.4 私钥</h3><p>外部账户的私钥由 64 个十六进制字符组成，可以用密码加密保存。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">fffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd036415f</span><br></pre></td></tr></table></figure><p>合约帐户也有一个 42 个字符组成的十六进制地址：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">0x06012c8cf97bead5deae237070f9587f8e7a266d</span><br></pre></td></tr></table></figure><p>合约地址通常在将合约部署到以太坊区块链时给出。 地址产生自创建人的地址和从创建人地址发送的交易数量（“nonce”）。</p><h1 id="2-交易"><a href="#2-交易" class="headerlink" title="2. 交易"></a>2. 交易</h1><p>交易是由帐户发出，带密码学签名的指令。 帐户将发起交易以更新以太坊网络的状态。 最简单的交易是将 ETH 从一个帐户转到另一个帐户。</p><p>以太坊交易是指由外部持有帐户发起的行动，换句话说，是指由人管理而不是智能合约管理的帐户。 例如，如果 Bob 发送 Alice 1 ETH，则 Bob 的帐户必须减少 1 ETH，而 Alice 的帐户必须增加 1 ETH。 交易会造成状态的改变。</p><h3 id="2-1-交易信息"><a href="#2-1-交易信息" class="headerlink" title="2.1 交易信息"></a>2.1 交易信息</h3><p>所提交的交易包括下列信息：</p><ul><li><code>from</code> - 发送者的地址，该地址将签署交易。 这将是一个外部帐户，因为合约帐户不能发送交易。</li><li><code>to</code> — 接收地址（如果是外部帐户，交易将传输值。 如果是合约帐户，交易将执行合约代码）</li><li><code>signature</code> – 发送者的标识符。 当发送者的私钥签署交易并确保发送者已授权此交易时，生成此签名。</li><li><code>nonce</code> - 一个有序递增的计数器，表示来自帐户的交易数量</li><li><code>value</code> – 发送者向接收者转移的以太币数量（面值为 WEI，1 个以太币 &#x3D; 1e+18wei）</li><li><code>input data</code> – 可包括任意数据的可选字段</li><li><code>gasLimit</code> – 交易可以消耗的最大数量的燃料单位。 <a href="https://ethereum.org/zh/developers/docs/evm/opcodes/">以太坊虚拟机</a>指定每个计算步骤所需的燃料单位</li><li><code>maxPriorityFeePerGas</code> - 作为小费提供给验证者的已消耗燃料的最高价格</li><li><code>maxFeePerGas</code> - 愿意为交易支付的每单位燃料的最高费用（包括 <code>baseFeePerGas</code> 和 <code>maxPriorityFeePerGas</code>）</li></ul><h3 id="2-2-交流流程"><a href="#2-2-交流流程" class="headerlink" title="2.2 交流流程"></a>2.2 交流流程</h3><p>交易对象看起来像这样。交易对象需要使用发送者的私钥签名，这证明交易只可能来自发送者，而不是欺诈。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  from: <span class="string">&quot;0xEA674fdDe714fd979de3EdF0F56AA9716B898ec8&quot;</span>,</span><br><span class="line">  to: <span class="string">&quot;0xac03bb73b6a9e108530aff4df5077c2b3d481e5a&quot;</span>,</span><br><span class="line">  gasLimit: <span class="string">&quot;21000&quot;</span>,</span><br><span class="line">  maxFeePerGas: <span class="string">&quot;300&quot;</span></span><br><span class="line">  maxPriorityFeePerGas: <span class="string">&quot;10&quot;</span></span><br><span class="line">  nonce: <span class="string">&quot;0&quot;</span>,</span><br><span class="line">  value: <span class="string">&quot;10000000000&quot;</span>,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>Geth 这样的以太坊客户端将处理此签名过程。</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;id&quot;</span><span class="punctuation">:</span> <span class="number">2</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;jsonrpc&quot;</span><span class="punctuation">:</span> <span class="string">&quot;2.0&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;method&quot;</span><span class="punctuation">:</span> <span class="string">&quot;account_signTransaction&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;params&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">    <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;from&quot;</span><span class="punctuation">:</span> <span class="string">&quot;0x1923f626bb8dc025849e00f99c25fe2b2f7fb0db&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;gas&quot;</span><span class="punctuation">:</span> <span class="string">&quot;0x55555&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;maxFeePerGas&quot;</span><span class="punctuation">:</span> <span class="string">&quot;0x1234&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;maxPriorityFeePerGas&quot;</span><span class="punctuation">:</span> <span class="string">&quot;0x1234&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;input&quot;</span><span class="punctuation">:</span> <span class="string">&quot;0xabcd&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;nonce&quot;</span><span class="punctuation">:</span> <span class="string">&quot;0x0&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;to&quot;</span><span class="punctuation">:</span> <span class="string">&quot;0x07a565b7ed7d7a678680a4c162885bedbb695fe0&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;value&quot;</span><span class="punctuation">:</span> <span class="string">&quot;0x1234&quot;</span></span><br><span class="line">    <span class="punctuation">&#125;</span></span><br><span class="line">  <span class="punctuation">]</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><p>示例响应：</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;jsonrpc&quot;</span><span class="punctuation">:</span> <span class="string">&quot;2.0&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;id&quot;</span><span class="punctuation">:</span> <span class="number">2</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;result&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;raw&quot;</span><span class="punctuation">:</span> <span class="string">&quot;0xf88380018203339407a565b7ed7d7a678680a4c162885bedbb695fe080a44401a6e4000000000000000000000000000000000000000000000000000000000000001226a0223a7c9bcf5531c99be5ea7082183816eb20cfe0bbc322e97cc5c7f71ab8b20ea02aadee6b34b45bb15bc42d9c09de4a6754e7000908da72d48cc7704971491663&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;tx&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;nonce&quot;</span><span class="punctuation">:</span> <span class="string">&quot;0x0&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;maxFeePerGas&quot;</span><span class="punctuation">:</span> <span class="string">&quot;0x1234&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;maxPriorityFeePerGas&quot;</span><span class="punctuation">:</span> <span class="string">&quot;0x1234&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;gas&quot;</span><span class="punctuation">:</span> <span class="string">&quot;0x55555&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;to&quot;</span><span class="punctuation">:</span> <span class="string">&quot;0x07a565b7ed7d7a678680a4c162885bedbb695fe0&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;value&quot;</span><span class="punctuation">:</span> <span class="string">&quot;0x1234&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;input&quot;</span><span class="punctuation">:</span> <span class="string">&quot;0xabcd&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;v&quot;</span><span class="punctuation">:</span> <span class="string">&quot;0x26&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;r&quot;</span><span class="punctuation">:</span> <span class="string">&quot;0x223a7c9bcf5531c99be5ea7082183816eb20cfe0bbc322e97cc5c7f71ab8b20e&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;s&quot;</span><span class="punctuation">:</span> <span class="string">&quot;0x2aadee6b34b45bb15bc42d9c09de4a6754e7000908da72d48cc7704971491663&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;hash&quot;</span><span class="punctuation">:</span> <span class="string">&quot;0xeba2df809e7a612a0a0d444ccfa5c839624bdc00dd29e3340d46df3870f8a30e&quot;</span></span><br><span class="line">    <span class="punctuation">&#125;</span></span><br><span class="line">  <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><h3 id="2-3-input-data字段"><a href="#2-3-input-data字段" class="headerlink" title="2.3 input data字段"></a>2.3 input data字段</h3><p>绝大多数交易都是从外部所有的帐户访问合约。 大多数合约用 Solidity 语言编写，并根据应用程序二进制接口 (ABI) 解释其<code>data</code>字段。</p><p>前四个字节使用函数名称和参数的哈希指定要调用的函数，调用数据的其余部分是参数。</p><p>例如，我们来看一下<a href="https://etherscan.io/tx/0xd0dcbe007569fcfa1902dae0ab8b4e078efe42e231786312289b1eee5590f6a1">这笔交易(opens in a new tab)</a>。</p><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Function: transfer(address to,uint256 value)</span><br><span class="line"></span><br><span class="line">MethodID: 0xa9059cbb</span><br><span class="line"><span class="section">[0]</span>:  0000000000000000000000004f6742badb049791cd9a37ea913f2bac38d01279</span><br><span class="line"><span class="section">[1]</span>:  000000000000000000000000000000000000000000000000000000003b0559f4</span><br></pre></td></tr></table></figure><p>函数选择器是 <code>0xa9059cbb</code>。 有几个<a href="https://www.4byte.directory/signatures/?bytes4_signature=0xa9059cbb">具有此签名的已知函数(opens in a new tab)</a>。 本例中<a href="https://etherscan.io/address/0xa0b86991c6218b36c1d19d4a2e9eb0ce3606eb48#code">合约源代码(opens in a new tab)</a>已经上传到 Etherscan，所以我们知道该函数是 <code>transfer(address, uint256)</code>。</p><p>根据应用程序二进制接口规范，整型值（例如地址，它是 20 字节整型）在应用程序二进制接口中显示为 32 字节的字，前面用零填充。 所以我们知道 to 地址是 4f6742badb049791cd9a37ea913f2bac38d01279(opens in a new tab)。 value 是 0x3b0559f4 &#x3D; 990206452。</p><h3 id="2-4-交易类型"><a href="#2-4-交易类型" class="headerlink" title="2.4 交易类型"></a>2.4 交易类型</h3><p>以太坊有几种不同类型的交易：</p><ul><li>常规交易：从一个帐户到另一个帐户的交易。</li><li>合约部署交易：没有“to”地址的交易，数据字段用于合约代码。</li><li>执行合约：与已部署的智能合约进行交互的交易。 在这种情况下，“to”地址是智能合约地址。</li></ul><h3 id="2-5-交易生命周期"><a href="#2-5-交易生命周期" class="headerlink" title="2.5 交易生命周期"></a>2.5 交易生命周期</h3><p>交易提交后，就会发生以下情况：</p><ol><li>以加密方式生成的交易哈希： <code>0x97d99bc7729211111a21b12c933c949d4f31684f1d6954ff477d0477538ff017</code></li><li>然后，该交易被广播到网络，并添加到由所有其他待处理的网络交易组成的交易池中。</li><li>验证者必须选择你的交易并将它包含在一个区块中，以便验证交易并认为它“成功”。</li><li>随着时间的流逝，包含你的交易的区块将升级成“合理”状态，然后变成“最后确定”状态。 通过这些升级，可以进一步确定 你的交易已经成功并将无法更改。 区块一旦“最终确定”，只能通过耗费数十亿美元的网络级攻击来更改。</li></ol><h1 id="3-燃料"><a href="#3-燃料" class="headerlink" title="3. 燃料"></a>3. 燃料</h1><p>Gas 对以太坊网络至关重要。 正是这种燃料使它能够运行，正如车辆需要汽油一样。</p><h3 id="3-1-燃料费"><a href="#3-1-燃料费" class="headerlink" title="3.1 燃料费"></a>3.1 燃料费</h3><p>燃料费是<strong>用于执行某些操作的燃料数量，乘以每单位燃料的成本</strong>。 无论交易成功与否，都要支付燃料费。</p><img src="/p/319117f7/gas.png" alt="img" style="zoom:50%"><p>燃料费必须用以太坊的本币支付，即以太币 (ETH)。 燃料通常以 gwei 计价，gwei 是以太币的一种计量单位。 一个 gwei 等于一个以太币的十亿分之一（0.000000001 个以太币，或 10-9 个以太币）。</p><p>比如，你可以说你的燃料费是 1 gwei，而不说 0.000000001 个以太币。</p><p>“Gwei” 是 “giga-wei” 的缩写，意思是 “十亿个 wei”。 一个 gwei 等于十亿个 wei。 Wei 本身（以 b-money(opens in a new tab) 的发明者 Wei Dai(opens in a new tab) 的名字命名）是以太币的最小单位。</p><h3 id="3-2-如何计算燃料费？"><a href="#3-2-如何计算燃料费？" class="headerlink" title="3.2 如何计算燃料费？"></a>3.2 如何计算燃料费？</h3><p>当提交交易时，你可以设置你愿意支付的燃料数量。 通过提供一定数量的燃料，你出价将你的交易添加到下一个区块中。 如果你提供的燃料太少，验证者就不太可能选择添加你的交易，这意味着你的交易可能会延迟执行或不会被执行。 如果提供太多，你可能浪费一些以太币。 那么，怎么知道你应该支付多少燃料费呢？</p><p>你支付的总燃料费分为两部分：<code>base fee</code> 和 <code>priority fee</code>（小费）。</p><p><code>Base fee</code> 由协议设定——你必须至少支付这些金额，然后你的交易才会被视为有效。 <code>Priority fee</code> 是基础费以外的小费，它可以吸引验证者选择将你的交易添加到下一个区块。</p><p>只支付 <code>base fee</code> 的交易从技术上讲是有效的，但不太可能被添加到区块，因为它没有激励验证者优先选择它而不是其他交易。 “合适的” <code>priority</code> 费由发送交易时的网络使用情况决定——如果有大量需求，那么你可能不得不将你的 <code>priority</code> 费设置得更高；但当需求较少时，你也可以减少该费用。</p><p><strong>例子一</strong></p><p>例如，假设 Jordan 要向 Taylor 支付 1 个以太币。 一笔以太币转账需要 21,000 单位的燃料，基础费是10 gwei。 Jordan 支付了 2 gwei 作为小费。</p><p>*<em>总费用等于：使用的燃料单位数 <em>（基础费 + 小费）</em></em></p><p>其中 <code>base fee</code> 由协议设置，<code>priority fee</code> 是用户设置的支付给验证者的小费。</p><p>即 <code>21,000 * (10 + 2) = 252,000 gwei</code>（0.000252 个以太币）。</p><p>当 Jordan 转账时，将从 Jordan 帐户中扣除 1.000252 个以太币。</p><p>Taylor 的帐户增加 1.0000 个以太币。</p><p>验证者收到价值 0.000042 个以太币的小费。 0.00021 个以太币的 <code>base fee</code> 被销毁。[21000 * 10 * 0.000000001（10^-9）]</p><p><strong>例子二</strong></p><p>执行交易需要耗费燃料。 简单的转账交易需要 21000 单位燃料。</p><p>因此，如果 Bob 要在 <code>baseFeePerGas</code> 为 190 Gwei 且 <code>maxPriorityFeePerGas</code> 为 10 Gwei 时给 Alice 发送一个以太币，Bob 需要支付以下费用：</p><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">(190 + 10) * <span class="attr">21000</span> = <span class="number">4</span>,<span class="number">200</span>,<span class="number">000</span> gwei</span><br><span class="line">--或--</span><br><span class="line">0.0042 ETH</span><br></pre></td></tr></table></figure><p>Bob 的帐户将会扣除 <strong>1.0042 个以太币</strong>（1 个以太币给 Alice，0.0042 个以太币作为燃料费用）</p><p>Alice 的帐户将会增加 <strong>+1.0 ETH</strong></p><p>基础费将会燃烧 <strong>-0.00399 ETH</strong></p><p>验证者获得 <strong>0.000210 个以太币</strong>的小费</p><p>任何智能合约交互也需要燃料，任何未用于交易的燃料都会退还给用户帐户。</p><img src="/p/319117f7/gas-tx.png" alt="img" style="zoom:50%"><h3 id="3-3-基础费"><a href="#3-3-基础费" class="headerlink" title="3.3 基础费"></a>3.3 基础费</h3><p>每个区块都有一个基础费作为底价。 要想有资格添加到区块中，燃料费出价必须至少等于基础费。 基础费独立于当前区块计算，是由当前区块之前的区块决定的，这使得用户更容易预测交易费。 在创建区块时，它的<strong>基础费将被“销毁”</strong>并退出流通。</p><p>基础费由一个公式计算得出，该公式将上一个区块的大小（所有交易中使用的燃料数量）与目标大小进行比较。 如果超过目标区块大小，每个区块的基础费将最多增加 12.5%。</p><table><thead><tr><th>区块编号</th><th align="right">已包含燃料</th><th align="right">费用增加</th><th align="right">当前基本费用</th></tr></thead><tbody><tr><td>1</td><td align="right">15M</td><td align="right">0%</td><td align="right">100 gwei</td></tr><tr><td>2</td><td align="right">30M</td><td align="right">0%</td><td align="right">100 gwei</td></tr><tr><td>3</td><td align="right">30M</td><td align="right">12.5%</td><td align="right">112.5 gwei</td></tr><tr><td>4</td><td align="right">30M</td><td align="right">12.5%</td><td align="right">126.6 gwei</td></tr><tr><td>5</td><td align="right">30M</td><td align="right">12.5%</td><td align="right">142.4 gwei</td></tr><tr><td>6</td><td align="right">30M</td><td align="right">12.5%</td><td align="right">160.2 gwei</td></tr><tr><td>7</td><td align="right">30M</td><td align="right">12.5%</td><td align="right">180.2 gwei</td></tr><tr><td>8</td><td align="right">30M</td><td align="right">12.5%</td><td align="right">202.7 gwei</td></tr></tbody></table><p>根据以上表格，要在 9 号区块创建交易，钱包会让用户明确知晓：要将交易添加到下一个区块的<strong>最高基础费</strong>等于 <code>current base fee * 112.5%</code> 或者 <code>202.7 gwei * 112.5% = 228.1 gwei</code>。</p><h3 id="3-4-优先费（小费）"><a href="#3-4-优先费（小费）" class="headerlink" title="3.4 优先费（小费）"></a>3.4 优先费（小费）</h3><p>优先费（小费）激励验证者将交易添加到区块中。 如果没有小费，验证者会发现开采空区块在经济上可行，因为它们会获得相同的区块奖励。</p><p>小额小费是对验证者将交易添加到区块的最小激励。 在相同区块中，对于要优先于其他交易执行的交易，可以添加更高的小费来尝试使出价高于竞争性交易。</p><h3 id="3-5-最高费用"><a href="#3-5-最高费用" class="headerlink" title="3.5 最高费用"></a>3.5 最高费用</h3><p>要在网络上执行交易，用户可以为他们愿意支付的交易执行费用指定最高限额。 此可选参数称为 <code>maxFeePerGas</code>。 为了执行交易，最高费用必须超过基础费和小费的总和。 交易完成后，会将最高费用与基础费和小费总和之间的差额退还给交易发送人。</p><p>尽管交易中包含费用限制，但交易中未使用的所有燃料将退还给用户（即退还 <code>max fee - (base fee + tip)</code>）。</p><h3 id="3-6-什么是燃料限额？"><a href="#3-6-什么是燃料限额？" class="headerlink" title="3.6 什么是燃料限额？"></a>3.6 什么是燃料限额？</h3><p>燃料限额是指你愿意在交易中消耗的最大燃料数量。 涉及<a href="https://ethereum.org/zh/developers/docs/smart-contracts/">智能合约</a>的更复杂交易需要进行更多的计算工作，因此相比简单的支付，它们需要更高的燃料限额。 标准以太币转账要求燃料限额为 21,000 单位燃料。</p><p>例如，如果你对简单的以太币转账设置 50,000 单位燃料限额，以太坊虚拟机将消耗 21,000 单位，你将收到剩余的 29,000 单位。 然而，如果你设置的燃料太少，比如说，对于简单的以太币转账，设置燃料限额为 20,000 单位，以太坊虚拟机将消耗 20,000 单位燃料并尝试执行交易，但最后不会完成。 然后，以太坊虚拟机回滚所有变化，但由于验证者已经完成了价值 20k 单位燃料的工作，这些燃料就被消耗了。</p><h1 id="4-区块"><a href="#4-区块" class="headerlink" title="4. 区块"></a>4. 区块</h1><p>区块是指一批交易的组合，并且包含链中上一个区块的哈希。 这将区块连接在一起（成为一个链），因为哈希是从区块数据中加密得出的。 这可以防止欺诈，因为以前的任何区块中的任何改变都会使后续所有区块无效，而且所有哈希都会改变，所有运行区块链的人都会注意到。</p><h3 id="4-1-块提交"><a href="#4-1-块提交" class="headerlink" title="4.1 块提交"></a>4.1 块提交</h3><p>为了确保以太坊网络上的所有参与者保持同步状态并就交易的确切历史达成共识，我们将交易分为多个区块。 这意味着同时有数十个（甚至数百个）交易被提交、达成一致并同步。</p><p>通过间隔提交，所有网络参与者有足够时间达成共识：即使交易请求每秒发生数十次，但以太坊上的区块仅仅大约每十二秒创建并提交一次。</p><img src="/p/319117f7/tx-block.png" alt="img" style="zoom:50%"><h3 id="4-2-区块如何工作"><a href="#4-2-区块如何工作" class="headerlink" title="4.2 区块如何工作"></a>4.2 区块如何工作</h3><p>为了保存交易历史，区块被严格排序（创建的每个新区块都包含一个其父块的引用），区块内的交易也严格排序。 除极少数情况外，在任何特定时间，网络上的所有参与者都同意区块的确切数目和历史， 并且正在努力将当前的活动交易请求分批到下一个区块。</p><p>随机选择的验证者在网络上构建完区块后，该区块将传播到整个网络；所有节点都将该区块添加至其区块链的末尾，然后挑选新的验证者来创建下一个区块。 目前，确切的区块构建过程和提交&#x2F;共识过程由以太坊的“权益证明”协议规定。</p><h3 id="4-3-权益证明协议"><a href="#4-3-权益证明协议" class="headerlink" title="4.3 权益证明协议"></a>4.3 权益证明协议</h3><p>权益证明是指：</p><ul><li>验证节点必须向存款合约中质押 32 个以太币，作为抵押品防止发生不良行为。 这有助于保护网络，因为如果发生不诚实活动且可以证实，部分甚至全部质押金额将被销毁。</li><li>在每个时隙（12 秒的时间间隔）中，会随机选择一个验证者作为区块提议者。 他们将交易打包并执行，然后确定一个新的“状态”。 他们将这些信息包装到一个区块中并传送给其他验证者。</li><li>其他获悉新区块的验证者再次执行区块中包含的交易，确定他们同意对全局状态提出的修改。 假设该区块是有效的，验证者就将该区块添加进各自的数据库。</li><li>如果验证者获悉在同一时隙内有两个冲突区块，他们会使用自己的分叉选择算法选择获得最多质押以太币支持的那一个区块。</li></ul><h3 id="4-4-区块包含什么？"><a href="#4-4-区块包含什么？" class="headerlink" title="4.4 区块包含什么？"></a>4.4 区块包含什么？</h3><p>一个区块中包含很多信息。 区块的最高层包含以下字段：</p><table><thead><tr><th align="left">字段</th><th align="left">简介</th></tr></thead><tbody><tr><td align="left"><code>slot</code></td><td align="left">区块所属的时隙</td></tr><tr><td align="left"><code>proposer_index</code></td><td align="left">提出区块的验证者的 ID</td></tr><tr><td align="left"><code>parent_root</code></td><td align="left">上一个区块的哈希</td></tr><tr><td align="left"><code>state_root</code></td><td align="left">状态对象的根哈希</td></tr><tr><td align="left"><code>body</code></td><td align="left">包含多个字段的对象，定义如下</td></tr></tbody></table><p>区块的 <code>body</code> 包含一些自有字段：</p><table><thead><tr><th align="left">栏目</th><th align="left">简介</th></tr></thead><tbody><tr><td align="left"><code>randao_reveal</code></td><td align="left">用于选择下一个区块提议者的值</td></tr><tr><td align="left"><code>eth1_data</code></td><td align="left">关于存款合约的信息</td></tr><tr><td align="left"><code>graffiti</code></td><td align="left">用于标记区块的任意数据</td></tr><tr><td align="left"><code>proposer_slashings</code></td><td align="left">将要惩罚的验证者列表</td></tr><tr><td align="left"><code>attester_slashings</code></td><td align="left">被惩罚的验证者列表</td></tr><tr><td align="left"><code>attestations</code></td><td align="left">支持当前区块的认证列表</td></tr><tr><td align="left"><code>deposits</code></td><td align="left">存款合约新增存款的列表</td></tr><tr><td align="left"><code>voluntary_exits</code></td><td align="left">退出网络的验证者列表</td></tr><tr><td align="left"><code>sync_aggregate</code></td><td align="left">用于服务轻客户端的验证者子集</td></tr><tr><td align="left"><code>execution_payload</code></td><td align="left">从执行客户端传送来的交易</td></tr></tbody></table><p><code>attestations</code> 字段包含区块中所有认证的列表。 认证有自己的数据类型，其中包含多条数据。</p><h3 id="4-5-区块时间"><a href="#4-5-区块时间" class="headerlink" title="4.5 区块时间"></a>4.5 区块时间</h3><p>区块时间是指两个区块之间的时间间隔。 <strong>在以太坊中，时间划分为每 12 秒一个单位，称为“时隙”。</strong> 在每个时隙内，选择一个单独的验证者提议区块。 假设所有验证者都在线且完全正常运行，则每个时隙内都会有一个区块产生，意味着区块时间是 12 秒。 但是，偶尔验证者在被要求提议区块时不在线，导致有时候一些时隙是空的。</p><p>这种实现与基于工作量证明的系统不同。在工作量证明系统中，区块时间是带有概率性的，并由协议的目标挖矿难度调节。 以太坊的<a href="https://etherscan.io/chart/blocktime">平均区块时间(opens in a new tab)</a>是一个很好的例子，根据不变的新的 12 秒区块时间，可以清楚地推断出从工作量证明到权益证明的过渡。</p><h3 id="4-6-区块大小"><a href="#4-6-区块大小" class="headerlink" title="4.6 区块大小"></a>4.6 区块大小</h3><p>最后一条重要提示是，区块本身的大小是有界限的。</p><p>每个区块的目标大小为 1500 万单位燃料，但区块的大小将根据网络需求而增加或减少，直至达到 3000 万单位燃料的区块限制（目标区块大小的 2 倍）。 区块中所有交易消耗的总燃料量必须低于区块的燃料限制。 这很重要，因为它可以确保区块不能任意扩大。</p><p>如果区块可以任意扩大，由于空间和速度方面的要求，性能较差的全节点将逐渐无法跟上网络。 区块越大，在下一个时隙中及时处理它们需要的算力就越强大。 这是一种集中化的因素，可以通过限制区块大小来抵制。</p><h1 id="5-以太坊虚拟机-EVM"><a href="#5-以太坊虚拟机-EVM" class="headerlink" title="5. 以太坊虚拟机 (EVM)"></a>5. 以太坊虚拟机 (EVM)</h1><p>EVM它是真实存在并由数以千计运行以太坊客户端的计算机共同维护的一个实体。</p><p>以太坊不是分布式账本，而是分布式<a href="https://wikipedia.org/wiki/Finite-state_machine">状态机器(opens in a new tab)</a>。 以太坊的状态是一个大型数据结构，它不仅保存所有帐户和余额，而且还保存一个<em>机器状态</em>，它可以根据预定义的一组规则在不同的区块之间进行更改，并且可以执行任意的机器代码。 在区块中更改状态的具体规则由 EVM 定义。</p><img src="/p/319117f7/evm.png" alt="img" style="zoom:50%"><h1 id="6-网络"><a href="#6-网络" class="headerlink" title="6. 网络"></a>6. 网络</h1><p>以太坊只有一个主网，但可以创建符合相同协议规则的独立网络用于测试和开发。 有许多独立的“网络”遵循该协议，但彼此之间没有交互。 你甚至可以在自己的计算机上本地启动一个以太坊网络，以测试你的智能合约和 web3 应用程序。</p><p>以太坊帐户可在不同的网络上使用，但是帐户余额和交易历史记录不会结转到以太坊主网以外。 进行测试时，了解哪些网络可用以及如何获取可以试用的测试网以太币是很有用的。 一般来说，出于安全考虑，不建议在测试网上重复使用主网帐户，反之亦然。</p><h3 id="6-1-以太坊测试网"><a href="#6-1-以太坊测试网" class="headerlink" title="6.1 以太坊测试网"></a>6.1 以太坊测试网</h3><p>在部署到主网之前，你应该在测试网测试编写的任何合约代码。 在与现有智能合约集成的去中心化应用程序中，大多数项目将副本部署到测试网。</p><p>客户端开发者目前还在维护的两个公共测试网是 Sepolia 和 Goerli。 Sepolia 是一个供合约和应用程序开发者测试其应用程序的网络。 Goerli 网络是让协议开发者测试网络升级，并让质押人测试运行验证者。</p><p><strong>Sepolia 是应用程序开发时推荐使用的默认测试网</strong>。 Sepolia 网络使用一种需要许可的验证者设置。 它相对较新，即它的状态和历史记录都非常小。 这意味着网络可以快速同步，并且在其上运行节点需要的存储空间更少。 这对于希望快速启动节点并直接与网络交互的用户来讲，是非常有用的。</p><h1 id="7-参考资料"><a href="#7-参考资料" class="headerlink" title="7. 参考资料"></a>7. 参考资料</h1><ul><li><a href="https://ethereum.org/zh/developers/docs/accounts/">https://ethereum.org/zh/developers/docs/accounts/</a></li></ul></div><div class="reward-container"><div>可以加首页作者微信，咨询相关问题！</div><button onclick='var qr=document.getElementById("qr");qr.style.display="none"===qr.style.display?"block":"none"'>打赏</button><div id="qr" style="display:none"><div style="display:inline-block"><img src="/images/wechatpay.jpg" alt="levon 微信支付"><p>微信支付</p></div><div style="display:inline-block"><img src="/images/alipay.jpg" alt="levon 支付宝"><p>支付宝</p></div></div></div><footer class="post-footer"><div class="post-nav"><div class="post-nav-item"><a href="/p/57254ff8.html" rel="prev" title="计算机网络模型和协议"><i class="fa fa-chevron-left"></i> 计算机网络模型和协议</a></div><div class="post-nav-item"><a href="/p/4fd520f9.html" rel="next" title="zsh主题powerlevel9k升级到powerlevel10k">zsh主题powerlevel9k升级到powerlevel10k <i class="fa fa-chevron-right"></i></a></div></div></footer></article></div><div class="comments" id="valine-comments"></div><script>window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }</script></div><div class="toggle sidebar-toggle"><span class="toggle-line toggle-line-first"></span> <span class="toggle-line toggle-line-middle"></span> <span class="toggle-line toggle-line-last"></span></div><aside class="sidebar"><div class="sidebar-inner"><ul class="sidebar-nav motion-element"><li class="sidebar-nav-toc">文章目录</li><li class="sidebar-nav-overview">站点概览</li></ul><div class="post-toc-wrap sidebar-panel"><div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#1-%E4%BB%A5%E5%A4%AA%E5%9D%8A%E5%B8%90%E6%88%B7"><span class="nav-text">1. 以太坊帐户</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1-1-%E5%A4%96%E9%83%A8%E6%8C%81%E6%9C%89"><span class="nav-text">1.1 外部持有</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#1-2-%E5%90%88%E7%BA%A6%E8%B4%A6%E6%88%B7"><span class="nav-text">1.2 合约账户</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#1-3-%E8%B4%A6%E6%88%B7%E6%9E%84%E6%88%90"><span class="nav-text">1.3 账户构成</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#1-4-%E7%A7%81%E9%92%A5"><span class="nav-text">1.4 私钥</span></a></li></ol></li></ol><li class="nav-item nav-level-1"><a class="nav-link" href="#2-%E4%BA%A4%E6%98%93"><span class="nav-text">2. 交易</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#2-1-%E4%BA%A4%E6%98%93%E4%BF%A1%E6%81%AF"><span class="nav-text">2.1 交易信息</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-2-%E4%BA%A4%E6%B5%81%E6%B5%81%E7%A8%8B"><span class="nav-text">2.2 交流流程</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-3-input-data%E5%AD%97%E6%AE%B5"><span class="nav-text">2.3 input data字段</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-4-%E4%BA%A4%E6%98%93%E7%B1%BB%E5%9E%8B"><span class="nav-text">2.4 交易类型</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-5-%E4%BA%A4%E6%98%93%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F"><span class="nav-text">2.5 交易生命周期</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#3-%E7%87%83%E6%96%99"><span class="nav-text">3. 燃料</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#3-1-%E7%87%83%E6%96%99%E8%B4%B9"><span class="nav-text">3.1 燃料费</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-2-%E5%A6%82%E4%BD%95%E8%AE%A1%E7%AE%97%E7%87%83%E6%96%99%E8%B4%B9%EF%BC%9F"><span class="nav-text">3.2 如何计算燃料费？</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-3-%E5%9F%BA%E7%A1%80%E8%B4%B9"><span class="nav-text">3.3 基础费</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-4-%E4%BC%98%E5%85%88%E8%B4%B9%EF%BC%88%E5%B0%8F%E8%B4%B9%EF%BC%89"><span class="nav-text">3.4 优先费（小费）</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-5-%E6%9C%80%E9%AB%98%E8%B4%B9%E7%94%A8"><span class="nav-text">3.5 最高费用</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-6-%E4%BB%80%E4%B9%88%E6%98%AF%E7%87%83%E6%96%99%E9%99%90%E9%A2%9D%EF%BC%9F"><span class="nav-text">3.6 什么是燃料限额？</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#4-%E5%8C%BA%E5%9D%97"><span class="nav-text">4. 区块</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#4-1-%E5%9D%97%E6%8F%90%E4%BA%A4"><span class="nav-text">4.1 块提交</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#4-2-%E5%8C%BA%E5%9D%97%E5%A6%82%E4%BD%95%E5%B7%A5%E4%BD%9C"><span class="nav-text">4.2 区块如何工作</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#4-3-%E6%9D%83%E7%9B%8A%E8%AF%81%E6%98%8E%E5%8D%8F%E8%AE%AE"><span class="nav-text">4.3 权益证明协议</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#4-4-%E5%8C%BA%E5%9D%97%E5%8C%85%E5%90%AB%E4%BB%80%E4%B9%88%EF%BC%9F"><span class="nav-text">4.4 区块包含什么？</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#4-5-%E5%8C%BA%E5%9D%97%E6%97%B6%E9%97%B4"><span class="nav-text">4.5 区块时间</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#4-6-%E5%8C%BA%E5%9D%97%E5%A4%A7%E5%B0%8F"><span class="nav-text">4.6 区块大小</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#5-%E4%BB%A5%E5%A4%AA%E5%9D%8A%E8%99%9A%E6%8B%9F%E6%9C%BA-EVM"><span class="nav-text">5. 以太坊虚拟机 (EVM)</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#6-%E7%BD%91%E7%BB%9C"><span class="nav-text">6. 网络</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#6-1-%E4%BB%A5%E5%A4%AA%E5%9D%8A%E6%B5%8B%E8%AF%95%E7%BD%91"><span class="nav-text">6.1 以太坊测试网</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#7-%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99"><span class="nav-text">7. 参考资料</span></a></li></div></div><div class="site-overview-wrap sidebar-panel"><div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person"><img class="site-author-image" itemprop="image" alt="levon" src="/images/avatar.jpg"><p class="site-author-name" itemprop="name">levon</p><div class="site-description" itemprop="description">Keep it simple, stupid.</div></div><div class="site-state-wrap motion-element"><nav class="site-state"><div class="site-state-item site-state-posts"><a href="/archives/"><span class="site-state-item-count">346</span> <span class="site-state-item-name">日志</span></a></div><div class="site-state-item site-state-categories"><a href="/categories/"><span class="site-state-item-count">75</span> <span class="site-state-item-name">分类</span></a></div><div class="site-state-item site-state-tags"><a href="/tags/"><span class="site-state-item-count">151</span> <span class="site-state-item-name">标签</span></a></div></nav></div><div class="links-of-author motion-element"><span class="links-of-author-item"><a href="https://github.com/unix2dos" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;unix2dos" rel="noopener" target="_blank"><i class="github fa-fw"></i>GitHub</a> </span><span class="links-of-author-item"><a href="mailto:levonfly@gmail.com" title="E-Mail → mailto:levonfly@gmail.com" rel="noopener" target="_blank"><i class="envelope fa-fw"></i>E-Mail</a></span></div><div class="links-of-blogroll motion-element"><div class="links-of-blogroll-title"><i class="fa fa-link fa-fw"></i> Links</div><ul class="links-of-blogroll-list"><li class="links-of-blogroll-item"><a href="https://coolshell.cn/" title="https:&#x2F;&#x2F;coolshell.cn&#x2F;" rel="noopener" target="_blank">酷壳</a></li><li class="links-of-blogroll-item"><a href="https://catcoding.me/" title="https:&#x2F;&#x2F;catcoding.me&#x2F;" rel="noopener" target="_blank">程序员的喵</a></li><li class="links-of-blogroll-item"><a href="https://www.zsythink.net/" title="https:&#x2F;&#x2F;www.zsythink.net&#x2F;" rel="noopener" target="_blank">朱双印</a></li><li class="links-of-blogroll-item"><a href="https://eurychen.me/" title="https:&#x2F;&#x2F;eurychen.me&#x2F;" rel="noopener" target="_blank">东泽煮粥</a></li><li class="links-of-blogroll-item"><a href="https://luanruisong.com/" title="https:&#x2F;&#x2F;luanruisong.com&#x2F;" rel="noopener" target="_blank">anwu</a></li><li class="links-of-blogroll-item"><a href="https://io-oi.me/" title="https:&#x2F;&#x2F;io-oi.me&#x2F;" rel="noopener" target="_blank">一休儿</a></li></ul></div></div></div></aside><div id="sidebar-dimmer"></div></div></main><footer class="footer"><div class="footer-inner"><div class="beian"><a href="https://beian.miit.gov.cn/" rel="noopener" target="_blank">京ICP备20000727号 </a><img src="/images/beian.png" style="display:inline-block"><a href="http://www.beian.gov.cn/portal/registerSystemInfo?recordcode=11010502039978" rel="noopener" target="_blank">京公网安备11010502039978号</a></div><div class="copyright">&copy; <span itemprop="copyrightYear">2024</span> <span class="with-love"><i class="fa fa-heart"></i> </span><span class="author" itemprop="copyrightHolder">levon</span></div></div></footer></div><script src="/lib/anime.min.js"></script><script src="/lib/velocity/velocity.min.js"></script><script src="/lib/velocity/velocity.ui.min.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/schemes/pisces.js"></script><script src="/js/next-boot.js"></script><script>!function(){var e,t,o,n,r,a=document.getElementsByTagName("link");if(0<a.length)for(i=0;i<a.length;i++)"canonical"==a[i].rel.toLowerCase()&&a[i].href&&(e=a[i].href);t=e?e.split(":")[0]:window.location.protocol.split(":")[0],e=e||window.location.href,window,n=e,r=document.referrer,/([http|https]:\/\/[a-zA-Z0-9\_\.]+\.baidu\.com)/gi.test(n)||(o="https"===String(t).toLowerCase()?"https://sp0.baidu.com/9_Q4simg2RQJ8t7jm9iCKT-xh_/s.gif":"//api.share.baidu.com/s.gif",r?(o+="?r="+encodeURIComponent(document.referrer),n&&(o+="&l="+n)):n&&(o+="?l="+n),(new Image).src=o)}()</script><script src="/js/local-search.js"></script><script>if (document.querySelectorAll('pre.mermaid').length) {
  NexT.utils.getScript('//cdn.jsdelivr.net/npm/mermaid@8/dist/mermaid.min.js', () => {
    mermaid.initialize({
      theme    : 'forest',
      logLevel : 3,
      flowchart: { curve     : 'linear' },
      gantt    : { axisFormat: '%m/%d/%Y' },
      sequence : { actorMargin: 50 }
    });
  }, window.mermaid);
}</script><script>NexT.utils.loadComments(document.querySelector('#valine-comments'), () => {
  NexT.utils.getScript('//unpkg.com/valine/dist/Valine.min.js', () => {
    var GUEST = ['nick', 'mail', 'link'];
    var guest = 'nick,mail,link';
    guest = guest.split(',').filter(item => {
      return GUEST.includes(item);
    });
    new Valine({
      el         : '#valine-comments',
      verify     : false,
      notify     : true,
      appId      : 'Y4ry1QHkYxVXKLQBrx6LJXld-gzGzoHsz',
      appKey     : 'TXITOypSvI7JO61NI8EG5exk',
      placeholder: "留下您的小脚丫吧~",
      avatar     : 'mm',
      meta       : guest,
      pageSize   : '10' || 10,
      visitor    : true,
      lang       : '' || 'zh-cn',
      path       : location.pathname,
      recordIP   : false,
      serverURLs : ''
    });
  }, window.Valine);
});</script></body></html>